Chapter5. 인터넷 프로토콜 


5.1 개요 

- ip는 tcp/ip 프로토콜 모음에서 일꾼에 해당되는 프로토콜이다.
- tcp, udp, icmp, igmp 등의 데이터는 ip 데이터그램으로 전송된다. 
- best effort
- 비연결형 => ip가 네트워크 장치 내부(라우터)에 서로 연관된 데이터 그램들에 관한 어떠한 상태 정보도 유지하지 않음.
- 데이터그램은 각기 독립적으로 취급된다.
- 데이터그램들은 순서가 바뀐채로 전달될 수도 있다.
- ipv4: 가변크기. 
- ipv6: 40byte 고정크기 



5.2 ipv4 ipv6 헤더 
- ttl: 데이터그램이 통과할 수 있는 라우터 수의 상한선. 데이터그램을 포워딩하는 라우터마다 1씩 감소시킨다.
이 필드가 0이 되면 데이터그램은 폐기되며, 라우터가 icmp를 발송한다. 
- ipv4 데이터그램이 라우터를 통과할때 ttl필드 값의 감소로 인하여 checksum을 매번 계산해야한다. 


- header Checksum: 헤더에 대해서만 검사한다. 페이로드에 대해서는 별도의 체크 기능이 없다. 





5.4 ip 포워딩

5.4.1 포워딩 테이블 
- 라우팅 테이블은 개념상 다음과 같은 필드들을 포함한다.

 * 목적지: 
 * 마스크: 
 * 다음 홉: 
 * 인터페이스:
 
- 라우터와 호스트는 목적지에 이르는 완전한 포워딩 경로를 포함하지 않는다. 
- 다음 홉은 순환 구조가 형성되지 않는다고 가정된다. 


5.4.2 IP 포워딩 동작 
- 마스크와 목적지를 AND연산 한 결과와 라우팅 테이블의 항목들과 비교한다. 
- 일치하는게 많은 홉으로 이동한다. 
